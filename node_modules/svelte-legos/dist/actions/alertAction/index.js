import { eventListenerStore } from "../../stores/eventListenerStore";
import Alert from "./Alert";
export function alertAction(node, params) {
    let stop;
    const destroy = () => {
        stop && stop();
    };
    let alert;
    const update = ({ title, description, onClose, onOk }) => {
        destroy();
        function handleClick() {
            alert = new Alert(title, description, () => {
                onClose && onClose();
                alert?.unmount();
            }, () => {
                onOk && onOk();
                alert?.unmount();
            });
            alert.mount();
        }
        ({ stop } = eventListenerStore("click", handleClick, node));
    };
    update(params);
    return {
        update,
        destroy,
    };
}
